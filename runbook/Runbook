# 课题组 IT 设备使用手册（详细版）
版本：v1.1  
维护人：XXX（你）  
更新时间：YYYY-MM-DD  
适用范围：课题组办公终端（Windows/macOS/Linux）、GPU 服务器、网络与外设、科研数据与项目环境。

> 本手册目标：
> 1) 统一账号权限与设备管理，避免“谁都能改、没人能追溯”；  
> 2) 标准化环境配置/升级/备份流程，减少因操作不一致导致的故障；  
> 3) 提供可执行的自查步骤与故障闭环模板，提升响应效率与稳定性。

---

## 目录
- 1 总则与安全规范  
- 2 资产与设备管理  
- 3 账号与权限管理（申请/审批/回收）  
- 4 远程访问与文件传输规范  
- 5 环境配置规范（开发/训练/数据库/依赖）  
- 6 软件安装与升级规范（变更管理）  
- 7 备份与恢复规范（RPO/RTO、验证）  
- 8 监控与告警（Zabbix）  
- 9 常见故障自查（终端/网络/服务器/GPU/存储）  
- 10 变更与故障处理流程（事件闭环）  
- 11 巡检清单与例行维护  
- 附录 A：信息登记模板  
- 附录 B：故障报告模板（Incident）  
- 附录 C：变更记录模板（Change Log）

---

## 1. 总则与安全规范
### 1.1 安全原则
- **最小权限原则**：默认普通权限，确有需要再提升权限。
- **可追溯原则**：关键设备/服务器操作需可追溯（账号独立、记录变更）。
- **可恢复原则**：重要数据与配置必须可恢复（备份+恢复验证）。
- **分离原则**：个人资料与科研数据分离；实验/测试与生产环境分离。

### 1.2 禁止事项
- 禁止多人共用同一“个人账号”；禁止共享管理员密码。
- 禁止将账号密码、SSH 私钥通过群聊/邮件明文发送。
- 禁止将数据库账号、API Key 明文写入代码仓库（包括公开仓库）。
- 禁止在服务器上随意执行来源不明的脚本/安装包。

### 1.3 基本要求（所有成员）
- 电脑启用锁屏与密码（离开座位必须锁屏）。
- 重要文件只存一份属于高风险行为（至少两份备份）。
- 进行“升级/驱动/环境替换”等可能影响他人的操作前必须走变更流程（见第10章）。

---

## 2. 资产与设备管理
### 2.1 资产台账维护（建议强制）
维护一份资产表（Excel/在线表格均可），字段建议：
- **设备信息**：设备编号、类型（终端/服务器/显示器/交换机/UPS）、品牌型号、序列号
- **配置与系统**：CPU/内存/磁盘/GPU/网卡、OS版本、重要软件版本
- **网络信息**：主机名、IP、网关、DNS（服务器建议固定IP）
- **使用信息**：责任人、用途、放置地点、购置时间、保修到期
- **状态信息**：在线/离线、是否纳入监控、是否纳入备份

### 2.2 设备命名规范（建议）
- 终端：`lab-pc-01` / `lab-mac-01` / `lab-linux-01`
- 服务器：`lab-gpu-01` / `lab-gpu-02`
- 存储：`lab-nas-01`（如有）
> 统一命名有助于：监控/日志/排障定位、权限审计、资产管理。

### 2.3 设备交接（借用/离组）
- 新成员入组：登记设备、分配账号权限、确认备份策略、加入监控（如适用）。
- 成员离组：回收账号权限、确认资料迁移/删除、撤销密钥、注销访问权限。

---

## 3. 账号与权限管理（申请/审批/回收）
### 3.1 账号类型与用途
- **个人账号（推荐）**：每位成员独立账号，用于日常登录与任务执行（可审计）。
- **服务账号（谨慎）**：用于服务运行（如数据库服务）。服务账号需限制权限并登记用途。
- **临时账号（短期）**：用于临时访问（访客/短期合作），到期必须回收。

### 3.2 权限等级（建议）
- Level 0：只读/最低权限（访问共享数据）
- Level 1：普通用户（运行任务、使用工具）
- Level 2：项目管理员（管理项目目录权限、创建环境）
- Level 3：系统管理员（sudo/root，仅少数人）

### 3.3 权限申请流程（建议写死）
1) 申请人提交：用途、期限、所需权限范围（目录/服务/端口）
2) 维护人评估风险：是否影响他人、是否可用替代方案
3) 审批后实施：开通账号/添加权限
4) 到期回收：移除权限、注销密钥、更新记录

> 记录内容至少包含：时间、申请人、审批人、权限变更、原因、到期时间。

### 3.4 SSH Key 管理（建议）
- 推荐使用 SSH Key（避免密码泄露）
- 私钥只存本机，不外传；疑似泄露立即更换
- Key 需与个人绑定，禁止多人共用同一 Key

---

## 4. 远程访问与文件传输规范
### 4.1 访问方式
- Linux 服务器：SSH（建议 Key 登录）
- Windows：远程桌面（RDP）/企业远程工具（如有）
- 外网访问：建议 VPN/跳板机；避免直接暴露敏感端口

### 4.2 文件传输建议
- 小文件：scp
- 大文件/目录：rsync（支持增量/断点）
- 共享数据：统一共享目录（按项目/成员分层权限），避免散落桌面

### 4.3 下载/上传规范
- 重要数据上传前先校验（hash/大小/样本）
- 不建议在服务器上直接下载不可信文件（可先在终端下载校验再上传）

---

## 5. 环境配置规范（开发/训练/数据库/依赖）
### 5.1 基础原则
- **一个项目一个环境**：避免依赖冲突导致“今天能跑、明天跑不了”。
- **环境可复现**：必须能从文件恢复（requirements.txt / environment.yml / Dockerfile）。
- **环境与数据解耦**：环境变动不应破坏数据；数据位置统一规划。

### 5.2 Python 环境规范（推荐）
- 选型：conda / venv（二选一即可）
- 环境命名：`projname-py310`、`kgqa-py311`
- 每个项目必须提供：
  - `requirements.txt` 或 `environment.yml`
  - `README`：安装、运行、常见问题
  -（建议）锁定依赖版本，避免自动升级造成不稳定

### 5.3 GPU/CUDA 兼容记录（如适用）
建议维护一份“兼容矩阵”记录（写在仓库里也行）：
- Driver 版本
- CUDA 版本
- cuDNN（如用）
- 框架版本（PyTorch/TensorFlow）
- 常用模型/训练脚本适配情况

> GPU 相关升级必须先走变更流程并做好回滚（见第10章）。

### 5.4 数据库连接规范（如适用）
- 禁止明文提交密码到仓库
- 采用 `.env` 或 `config.local`，并加入 `.gitignore`
- 提供 `config.example` 模板供他人复制

---

## 6. 软件安装与升级规范（变更管理）
### 6.1 安装前检查
- 安装来源是否可信（官网/官方仓库）
- 是否影响现有环境（依赖冲突/端口冲突）
- 是否需要停机窗口（尤其服务器/共享服务）

### 6.2 升级与回滚策略（强烈建议）
- 升级前：
  - 记录当前版本与配置
  - 备份关键配置文件
  -（如虚拟化环境）打快照
- 升级后：
  - 验证关键功能点（登录/训练/服务访问）
  - 观察一段时间（日志/监控指标）
- 若失败：
  - 走回滚流程（恢复配置/回滚版本/快照回退）

---

## 7. 备份与恢复规范（RPO/RTO、验证）
### 7.1 定义（写给非运维同学看）
- **RPO（恢复点目标）**：最多允许丢失多少数据（例如 24 小时）
- **RTO（恢复时间目标）**：最多允许多长时间恢复（例如 4 小时）

### 7.2 备份对象分类
- A类（必须备份）：科研数据、训练结果、关键配置、账号权限记录
- B类（建议备份）：常用脚本、文档、重要安装包
- C类（可选）：缓存、中间文件（可再生成）

### 7.3 建议备份策略（可按实际调整）
- 服务器关键数据：
  - 每日增量 + 每周全量
  - 至少保留 4 周
- 重要配置与脚本：
  - 变更即备份（或至少每周）
- 备份位置：
  - 本地 + 异地（至少两份，避免单点故障）

### 7.4 恢复验证（最容易被忽视但最重要）
- 每月至少抽样恢复一次（选一个目录/项目）
- 验证内容：文件完整性、可用性、能否正常运行

### 7.5 恢复流程（详细版）
1) 确认损失范围（文件/目录/数据库/系统）
2) 锁定现场：避免覆盖或继续写入造成二次破坏
3) 选择恢复点：根据 RPO 选择最近可用备份
4) 先恢复到临时路径并验证
5) 验证通过后再替换生产目录
6) 记录全过程并更新预防措施

---

## 8. 监控与告警（Zabbix）
### 8.1 监控目标（建议）
- 主机资源：CPU、内存、磁盘、网络
- 可用性：关键端口、关键进程/服务（如训练服务、数据库）
- GPU（如需要）：GPU 使用率/显存/温度（可扩展）

### 8.2 告警原则
- 告警要可执行：触发后必须能指导“下一步做什么”
- 阈值要合理：过敏告警会造成疲劳；过松会漏报
- 告警必须闭环：见第10章“故障处理流程”

### 8.3 告警分级（建议）
- P1：影响多人/核心服务不可用（立即处理）
- P2：影响部分功能/可短暂容忍（尽快处理）
- P3：风险提示/趋势预警（计划处理）

---

## 9. 常见故障自查（按场景步骤）
> 自查原则：先确认“是否全局问题”，再定位“是网络/资源/服务/权限/环境”。

### 9.1 终端无法联网（Windows/macOS/Linux）
1) 检查物理连接：网线/Wi-Fi 是否正常  
2) 检查 IP：是否获取到地址、网关是否正确  
3) 连通性：能否 ping 网关？能否访问外网？  
4) DNS：能否解析域名？换 DNS 验证  
5) 仍不行：记录现象/截图/时间，提交故障报告

### 9.2 服务器服务不可用（网页/接口/训练服务）
1) 确认范围：仅你不可用还是所有人不可用  
2) 检查服务是否运行：服务状态/进程是否存在  
3) 检查端口可用性：端口是否监听、是否被防火墙拦截  
4) 查看日志：最近报错信息、是否有重启/异常退出  
5) 临时恢复：重启服务/回滚配置/切换备用  
6) 根因分析与预防：记录到 Incident（附录）

### 9.3 磁盘空间不足
1) 查看剩余空间与增长速度  
2) 定位大文件/大目录（日志/缓存/数据）  
3) 临时清理（不删原始数据）：清理临时文件、压缩日志  
4) 长期方案：扩容/调整保留策略/分层存储  
5) 更新监控阈值与告警策略

### 9.4 GPU 训练异常（如适用）
1) GPU 是否可见、是否被占用  
2) 显存是否异常占用（残留进程）  
3) 训练是否 I/O 或 CPU 受限（数据读取/磁盘/网络存储）  
4) 最近是否升级过驱动/CUDA/框架（回滚或改动记录）  
5) 必要时迁移任务或暂停变更，走变更流程

---

## 10. 变更与故障处理流程（事件闭环）
### 10.1 变更流程（升级/配置改动）
1) 提出变更：目标、原因、影响范围、执行时间  
2) 风险评估：是否影响他人任务、是否需要停机窗口  
3) 备份与回滚：升级前备份或快照，准备回滚步骤  
4) 执行：按步骤操作，关键点截图/记录  
5) 验证：功能验证 + 监控观察  
6) 记录与同步：写 Change Log，同步到群或文档

### 10.2 故障处理（Incident 闭环）
- 发现：告警/用户反馈/巡检发现
- 确认：是否复现、影响范围与优先级
- 定位：日志/监控/配置变更/资源瓶颈
- 修复：临时恢复 → 根因修复
- 复盘：根因 + 预防措施（监控/阈值/文档/自动化）

---

## 11. 巡检清单与例行维护
### 11.1 每周（服务器）
- CPU/内存/磁盘趋势检查
- 关键服务可用性与最近错误日志
- 备份任务是否成功、是否需要抽样恢复验证
- 新增账号/权限变更是否记录完整

### 11.2 每月（终端与网络）
- 终端系统补丁与驱动更新（按需）
- 软件版本统一与清理无用软件
- 网络设备与线路检查（如有）
- 资产台账核对与更新

---

# 附录 A：信息登记模板
- 设备编号：  
- 主机名：  
- IP / 网关 / DNS：  
- 系统版本：  
- 关键配置（CPU/内存/磁盘/GPU）：  
- 用途/负责人：  
- 是否纳入监控：是/否  
- 是否纳入备份：是/否  

# 附录 B：故障报告模板（Incident）
- 时间：  
- 现象：  
- 影响范围：  
- 是否可复现：是/否  
- 最近是否有变更：是/否（描述）  
- 初步定位：  
- 处理步骤：  
- 结果：  
- 根因：  
- 预防措施：  

# 附录 C：变更记录模板（Change Log）
- 变更时间：  
- 变更人：  
- 变更内容：  
- 影响范围：  
- 备份/回滚方案：  
- 验证结果：  
- 备注：  
